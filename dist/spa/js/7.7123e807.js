(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"0703":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"text-h3 q-mt-lg text-center text-grey-8 text-weight-light"},[e._v("\n    Research Groups\n  ")]),r("div",{staticClass:"q-pa-lg"},[r("div",{staticClass:"q-mt-md q-mb-md"},[r("q-btn-group",[r("q-btn",{attrs:{color:"red",icon:"leaderboard",label:"load"},on:{click:function(t){return e.buildChart()}}}),r("q-btn",{attrs:{color:"red",icon:"cached",label:"update"},on:{click:function(t){return e.buildChart()}}})],1),e.dataLoadingStatus?r("q-spinner-ios",{staticClass:"q-ml-md q-mr-md",attrs:{color:"light-blue",size:"2em"}}):e._e()],1),e.chart.chartOptions?r("div",{staticClass:"q-mb-lg"},[r("q-card",[r("q-card-section",[r("div",{staticClass:"q-pa-md"},[r("highcharts",{attrs:{options:e.chart.chartOptions}})],1)])],1)],1):e._e(),r("div",{staticClass:"q-mb-lg"},[e.chart?r("q-markup-table",[r("thead",[r("tr",e._l(e.chart.tableHeader,(function(t){return r("th",{key:t,staticClass:"text-left"},[e._v("\n              "+e._s(t)+"\n            ")])})),0)]),r("tbody",[e._l(e.chart.tableData,(function(t){return r("tr",{key:t.nid},e._l(t,(function(t,a){return r("td",{key:a,staticClass:"text-left"},[e._v("\n              "+e._s(t)+"\n            ")])})),0)})),r("tr",[r("td"),r("td"),e._l(e.chart.tableSums,(function(t){return r("td",{key:t,staticClass:"text-right"},[r("strong",[e._v(e._s(t.toFixed(2)))])])}))],2)],2)]):e._e()],1)])])},o=[],l=(r("13d5"),r("fb6a"),r("e6cf"),r("ddb0"),r("2b0e")),i=r("4452"),s=r("ea7f"),n=r.n(s),c=r("0319"),p=r.n(c),u=r("9955"),d=r.n(u),h=r("2ef0"),f=r.n(h);l["a"].use(i["Chart"]),p()(n.a);const b=r("2ef0");l["a"].use(d.a,{name:"cloneDeep",lodash:{cloneDeep:f.a}});var g={name:"ResearchGroups",components:{highcharts:i["Chart"]},data(){return{leftDrawerOpen:!0,dataLoadingStatus:!1,chart:!1}},methods:{removeArrayEmptyProperties(e){var t=e.length,r=Object.keys(e[0]).length,a=[];for(let o=0;o<r;o++){let r=0;e.forEach((function(e){let l=Object.keys(e)[o],i=e[l];""===i&&(r+=1,r==t&&a.push(l))}))}return a.length>0&&e.forEach((function(e){a.forEach((function(t){delete e[t]}))})),e},removeArrayProperties(e,t){var r=b.cloneDeep(e);return r.forEach((e=>{t.forEach((t=>{let r=t;delete e[r]}))})),r},columnChartSeries(e){let t=b.cloneDeep(e);var r=[];return t.forEach((function(e){var t={},a=[],o="";for(let[r,l]of Object.entries(e))"nid"!==r&&"field_proj_resgroup"!==r&&"field_rg_color"!==r&&"field_resgroup_abbreviation"!==r&&a.push(parseFloat(l)),"field_resgroup_abbreviation"===r&&(o=l),t.name=o,t.data=a,t.type="column",t.yAxis=0;t.color=e.field_rg_color,r.push(t)})),r},columnChartCategories(e){let t=b.cloneDeep(e),r=this.removeArrayProperties(t,["nid","field_proj_resgroup","field_rg_color","field_resgroup_abbreviation"]);var a=[];for(let o of Object.keys(r[0])){let e=o.slice(-4);a.push(e)}return a},splineChartData(e){let t=b.cloneDeep(e),r=this.removeArrayProperties(t,["field_rg_color","field_resgroup_abbreviation"]);var a=r[0],o=Object.keys(a),l=o.length,i=[];for(let c=0;c<l;c++){var s=[],n=0;r.forEach((function(e){let t=Object.keys(e)[c],r=Object.values(e)[c];var a=0;if("field_proj_resgroup"!==t&&"nid"!==t){let e=r;a=""===e?0:parseFloat(r),s.push(a)}})),s.length>0&&(n=s.reduce((function(e,t){return e+t}),0),i.push(n))}return i},splineChartCalcGroups(e){let t=b.cloneDeep(e),r=this.removeArrayProperties(t,["field_rg_color","field_resgroup_abbreviation"]);var a=r[0],o=Object.keys(a),l=o.length,i=[];for(let n=0;n<l;n++){var s=[];r.forEach((function(e){let t=Object.keys(e)[n],r=Object.values(e)[n];var a=0;if("field_proj_resgroup"!==t&&"nid"!==t){let e=r;a=""===e?0:parseFloat(r),0!==a&&s.push(a)}})),s.length>0&&i.push(s.length)}return i},splinePoaChartCalcGroups(e){let t=b.cloneDeep(e),r=this.removeArrayProperties(t,["field_poa_color","field_poagroup_abbreviation"]);var a=r[0],o=Object.keys(a),l=o.length,i=[];for(let n=0;n<l;n++){var s=[];r.forEach((function(e){let t=Object.keys(e)[n],r=Object.values(e)[n];var a=0;if("field_proj_poagroup"!==t&&"nid"!==t){let e=r;a=""===e?0:parseFloat(r),0!==a&&s.push(a)}})),s.length>0&&i.push(s.length)}return i},tableHeader(e){let t=b.cloneDeep(e),r=this.removeArrayProperties(t,["field_rg_color","field_resgroup_abbreviation"]);var a=r[0],o=[];return Object.entries(a).forEach((([e])=>{let t=e;if("nid"===t&&o.push("ID"),"field_proj_resgroup"===t&&o.push("Research group"),"field_proj_resgroup"!==t&&"nid"!==t){let e=t.slice(-4);o.push(e)}})),o},tableData(e){let t=b.cloneDeep(e),r=this.removeArrayProperties(t,["field_rg_color","field_resgroup_abbreviation"]);return r},async buildChart(){this.dataLoadingStatus=!0;var e="json/poagroup.json",t="json/rg.json";const r=await fetch(t),a=await fetch(e);if(r.ok){let e=await r.json(),t=b.cloneDeep(e);var o=this.removeArrayEmptyProperties(t);let u=await a.json(),d=b.cloneDeep(u);var l=this.removeArrayEmptyProperties(d),i={title:{text:"Diversiteit"},xAxis:{categories:this.columnChartCategories(o)},yAxis:[{min:0,title:{text:""},labels:{formatter:function(){return"â‚¬ "+n.a.numberFormat(this.value,2)}},stackLabels:{enabled:!1,style:{fontWeight:"bold",color:n.a.defaultOptions.title.style&&n.a.defaultOptions.title.style.color||"gray"}}},{title:{text:"",style:{color:"#88021a"}},labels:{format:"{value}",style:{color:"#88021a"}},opposite:!0}],legend:{layout:"vertical",align:"right",verticalAlign:"middle",backgroundColor:n.a.defaultOptions.legend.backgroundColor||"white",borderColor:"#CCC",borderWidth:1,shadow:!1},tooltip:{headerFormat:"<b>{point.x}</b><br/>",pointFormat:"{series.name}: {point.y}"},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!1}},line:{lineWidth:2}},series:this.columnChartSeries(o)},s={color:"#88021a",yAxis:1,type:"line",name:"Research groups",data:this.splineChartCalcGroups(o),marker:{enabled:!1,lineWidth:2,lineColor:"#88021a",fillColor:"#ffffff",radius:2}};i.series.push(s);var c={color:"#1192d1",yAxis:1,type:"line",name:"PoA groups",data:this.splinePoaChartCalcGroups(l),marker:{enabled:!1,lineWidth:2,lineColor:"#1192d1",fillColor:"#ffffff",radius:2}};i.series.push(c);var p={};p.tableHeader=this.tableHeader(o),p.tableData=this.tableData(o),p.tableSums=this.splineChartData(o),p.chartOptions=i,this.chart=p}else alert("Error HTTP: "+r.status);this.dataLoadingStatus=!1}}},_=g,v=r("2877"),m=r("e7a9"),y=r("9c40"),C=r("d9b2"),j=r("f09f"),k=r("a370"),O=r("2bb1"),D=r("eebe"),x=r.n(D),A=Object(v["a"])(_,a,o,!1,null,null,null);t["default"]=A.exports;x()(A,"components",{QBtnGroup:m["a"],QBtn:y["a"],QSpinnerIos:C["a"],QCard:j["a"],QCardSection:k["a"],QMarkupTable:O["a"]})}}]);